<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TaxGPT Basic</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-gray-100 p-6 font-sans">

<div class="max-w-2xl mx-auto bg-white shadow-xl rounded-xl p-6">

    <h1 class="text-3xl font-bold text-indigo-600 mb-4 text-center">
        TaxGPT (Basic Version)
    </h1>

    <p class="text-gray-600 text-center mb-6">
        Ask anything related to taxes below.
    </p>

    <!-- Input box -->
    <textarea id="userInput"
              placeholder="Type your question..."
              class="w-full p-3 border rounded-lg mb-4 h-28"></textarea>

    <!-- Button -->
    <button onclick="sendToGemini()"
            id="askBtn"
            class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-semibold">
        Ask AI
    </button>

    <!-- Output box -->
    <div id="responseBox"
         class="mt-6 p-4 bg-gray-50 border rounded-lg text-gray-800 whitespace-pre-wrap hidden"></div>

</div>


<script>
// ----------------------------
// üîß Gemini API Configuration
// ----------------------------
const GEMINI_API_KEY = "AIzaSyBh8epAN_XqXxjBoQRweMZdblJJRNyzlgU"; 
const MODEL = "gemini-2.5-flash";

// ----------------------------
// üöÄ Function to Call Gemini
// ----------------------------
async function sendToGemini() {
    const text = document.getElementById("userInput").value.trim();
    const responseBox = document.getElementById("responseBox");
    const askBtn = document.getElementById("askBtn");

    if (!text) return;

    // show loading
    askBtn.disabled = true;
    askBtn.innerText = "Thinking...";

    responseBox.classList.remove("hidden");
    responseBox.innerText = "Processing your request...";

    try {

        const result = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${GEMINI_API_KEY}`,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              contents: [{ parts: [{ text }] }]
            })
          }
        );

        const data = await result.json();

        const aiText =
            data?.candidates?.[0]?.content?.parts?.[0]?.text ||
            "‚ö†Ô∏è Gemini did not return a response.";

        responseBox.innerText = aiText;

    } catch (err) {
        responseBox.innerText = "‚ùå Error contacting Gemini API.";
        console.error(err);
    }

    askBtn.disabled = false;
    askBtn.innerText = "Ask AI";
}
</script>

</body>
</html>
